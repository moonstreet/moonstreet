<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Linux on Moonstreet</title><link>https://www.moonstreet.nl/tags/linux/</link><description>Recent content in Linux on Moonstreet</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>Copyright © 2008–2018, Steve Francia and the Hugo Authors; all rights reserved.</copyright><lastBuildDate>Wed, 05 Feb 2025 16:24:21 +0100</lastBuildDate><atom:link href="https://www.moonstreet.nl/tags/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>Ollama server</title><link>https://www.moonstreet.nl/post/ollama/</link><pubDate>Wed, 05 Feb 2025 16:24:21 +0100</pubDate><guid>https://www.moonstreet.nl/post/ollama/</guid><description>
&lt;h1 id="setting-up-an-old-school-self-hosted-server-stack-mattermost-openwebui-and-monitoring">Setting up an old school Self-Hosted Server Stack: Mattermost, OpenWebUI, and Monitoring&lt;/h1>
&lt;p>This is how Claude and I installed an Ollama server from scratch.&lt;/p>
&lt;h2 id="part-1-installing-ollama-and-openwebui">Part 1: Installing Ollama and OpenWebUI&lt;/h2>
&lt;h3 id="installing-ollama">Installing Ollama&lt;/h3>
&lt;p>First, we installed Ollama, which is the backend for our AI operations:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="ln">1&lt;/span>&lt;span class="cl">curl https://ollama.ai/install.sh &lt;span class="p">|&lt;/span> sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>After installation, we created a systemd service to manage Ollama:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="ln">1&lt;/span>&lt;span class="cl">sudo vim /etc/systemd/system/ollama.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Added this configuration:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="ln"> 1&lt;/span>&lt;span class="cl">&lt;span class="k">[Unit]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 2&lt;/span>&lt;span class="cl">&lt;span class="na">Description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Ollama Service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 3&lt;/span>&lt;span class="cl">&lt;span class="na">After&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">network-online.target&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 4&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 5&lt;/span>&lt;span class="cl">&lt;span class="k">[Service]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 6&lt;/span>&lt;span class="cl">&lt;span class="na">ExecStart&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">/usr/local/bin/ollama serve&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 7&lt;/span>&lt;span class="cl">&lt;span class="na">User&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">root&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 8&lt;/span>&lt;span class="cl">&lt;span class="na">Restart&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">always&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 9&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">10&lt;/span>&lt;span class="cl">&lt;span class="k">[Install]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">11&lt;/span>&lt;span class="cl">&lt;span class="na">WantedBy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">multi-user.target&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Started and enabled the service:&lt;/p></description></item><item><title>Finding files quickly</title><link>https://www.moonstreet.nl/post/vim-find/</link><pubDate>Fri, 29 Mar 2024 08:44:56 +0100</pubDate><guid>https://www.moonstreet.nl/post/vim-find/</guid><description>
&lt;h1 id="finding-files-with-fzf-ripgrep-and-nnn">Finding files with fzf ripgrep and nnn&lt;/h1>
&lt;p>This is the next articial in the series 'mouseless'. Find previous articles here:&lt;/p>
&lt;p>&lt;a href="https://www.moonstreet.nl/post/terminal-workflow/">Terminal workflow&lt;/a>&lt;br>
&lt;a href="https://www.moonstreet.nl/post/nice-vim-commands/">Nice vim commands&lt;/a>&lt;/p>
&lt;p>Why? Because navigating through files in can take a lot of time, especially if you are faced with a big git repo. However, tools like ripgrep and fzf can assist you here.&lt;/p>
&lt;p>Let's keep it simple and easy to remember!&lt;/p>
&lt;h2 id="nnn">nnn&lt;/h2>
&lt;p>&lt;a href="https://github.com/jarun/nnn">nnn&lt;/a> a full-featured terminal file manager.
Here are some commands you will need:&lt;/p></description></item><item><title>Terminal Workflow</title><link>https://www.moonstreet.nl/post/terminal-workflow/</link><pubDate>Sat, 06 Mar 2021 09:44:56 +0100</pubDate><guid>https://www.moonstreet.nl/post/terminal-workflow/</guid><description>
&lt;img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Tmux_logo.svg/1280px-Tmux_logo.svg.png" width="400">
&lt;p>This is a post about my workflow when editing files in the terminal.&lt;/p>
&lt;p>When editing files quickly I usually resort to vim.
It requires a lot of muscle memory but hey, one needs to train their reptile brain, right.&lt;/p>
&lt;h2 id="tmux-config">Tmux config&lt;/h2>
&lt;p>So I use tmux and vim so you need those two installed.
My tmux config is really simple. I changed the leader key to ctrl+q for easy reach on my keyboard.
I used to have ctrl+a but that conflicted with my habit to use that keyboard combo to go to the beginning of a command.&lt;/p></description></item><item><title>My personal vim cheatsheet</title><link>https://www.moonstreet.nl/post/nice-vim-commands/</link><pubDate>Fri, 05 Mar 2021 09:44:56 +0100</pubDate><guid>https://www.moonstreet.nl/post/nice-vim-commands/</guid><description>
&lt;p>Here is my vim &amp;amp; tmux cheatsheet.&lt;/p>
&lt;h2 id="tmux">tmux&lt;/h2>
&lt;p>This is my .tmux.conf. I prefer to set the meta key to &lt;strong>q&lt;/strong>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="ln">1&lt;/span>&lt;span class="cl">set-option -g prefix C-q
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">2&lt;/span>&lt;span class="cl">&lt;span class="nb">set&lt;/span> -g mouse off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">3&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">4&lt;/span>&lt;span class="cl">&lt;span class="nb">set&lt;/span> -g status-bg black
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">5&lt;/span>&lt;span class="cl">&lt;span class="nb">set&lt;/span> -g status-fg white
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Command&lt;/th>
&lt;th style="text-align: center">What it does&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">ctrl+q arrows&lt;/td>
&lt;td style="text-align: center">Navigate windows (tmux)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">ctrl+q %&lt;/td>
&lt;td style="text-align: center">Split vertically (tmux)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">ctrl+q &amp;quot;&lt;/td>
&lt;td style="text-align: center">Split horizontally (tmux)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">ctrl+q z&lt;/td>
&lt;td style="text-align: center">Toggle window full screen (nice one!)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">[&lt;/td>
&lt;td style="text-align: center">Enter scroll mode&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">q&lt;/td>
&lt;td style="text-align: center">Leave scroll mode&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="open-multiple-files-at-once">Open multiple files at once&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln">1&lt;/span>&lt;span class="cl">vim file1 file2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">2&lt;/span>&lt;span class="cl">vim -O file1 file2 &lt;span class="c1"># split vertically&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="buffers">Buffers&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Command&lt;/th>
&lt;th style="text-align: center">What it does&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">:bn&lt;/td>
&lt;td style="text-align: center">Display next buffer&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">:bp&lt;/td>
&lt;td style="text-align: center">Display previous buffer&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">:bd&lt;/td>
&lt;td style="text-align: center">Delete buffer&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">:ls&lt;/td>
&lt;td style="text-align: center">List buffers&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="windows">Windows&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Command&lt;/th>
&lt;th style="text-align: center">What it does&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">u&lt;/td>
&lt;td style="text-align: center">Undo&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">ctrl+r&lt;/td>
&lt;td style="text-align: center">Redo&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">ctrl+ww&lt;/td>
&lt;td style="text-align: center">Navigate to buffer&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">:vsplit&lt;/td>
&lt;td style="text-align: center">Split vertically&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">ctrl + w _&lt;/td>
&lt;td style="text-align: center">Set height of split to max&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">ctrl + w |&lt;/td>
&lt;td style="text-align: center">Set width of split to max&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="productivity-boosters">Productivity boosters&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Command&lt;/th>
&lt;th style="text-align: center">What it does&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">v&lt;/td>
&lt;td style="text-align: center">Enter visual mode per character&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">V&lt;/td>
&lt;td style="text-align: center">Enter visual mode per line&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">ZZ&lt;/td>
&lt;td style="text-align: center">Write file, if modified, and quit Vim&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">(&lt;/td>
&lt;td style="text-align: center">jumps to the previous sentence&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">)&lt;/td>
&lt;td style="text-align: center">jumps to the next sentence&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">{&lt;/td>
&lt;td style="text-align: center">jumps to the previous paragraph&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">}&lt;/td>
&lt;td style="text-align: center">jumps to the next paragraph&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">[[&lt;/td>
&lt;td style="text-align: center">jumps to the previous section&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">]]&lt;/td>
&lt;td style="text-align: center">jumps to the next section&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">[]&lt;/td>
&lt;td style="text-align: center">jump to the end of the previous section&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">][&lt;/td>
&lt;td style="text-align: center">jump to the end of the next section&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">a&lt;/td>
&lt;td style="text-align: center">Insert text after the cursor&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">A&lt;/td>
&lt;td style="text-align: center">Insert text at the end of the line&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">i&lt;/td>
&lt;td style="text-align: center">Insert text before the cursor&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">o&lt;/td>
&lt;td style="text-align: center">Begin a new line below the cursor&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">O&lt;/td>
&lt;td style="text-align: center">Begin a new line above the cursor&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">Go&lt;/td>
&lt;td style="text-align: center">Add a new line at the end of the file&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">:%s/wrong/right/gc&lt;/td>
&lt;td style="text-align: center">Find and replace&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">/foo&lt;/td>
&lt;td style="text-align: center">Search and highlight foo&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">:noh&lt;/td>
&lt;td style="text-align: center">Stop highlihghting foo&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">:r&lt;/td>
&lt;td style="text-align: center">Replace current character&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">:R&lt;/td>
&lt;td style="text-align: center">Replace current character and stay in insert mode&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="favorites">Favorites&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Command&lt;/th>
&lt;th style="text-align: center">What it does&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">ci &amp;quot;&lt;/td>
&lt;td style="text-align: center">Change text between quotes works with {, [ and so on&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">.&lt;/td>
&lt;td style="text-align: center">Repeat&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>A minimal Arch Linux installation with Gnome</title><link>https://www.moonstreet.nl/post/arch-notes/</link><pubDate>Sun, 28 Feb 2021 08:39:40 +0100</pubDate><guid>https://www.moonstreet.nl/post/arch-notes/</guid><description>
&lt;p>Arch Linux is extremely well documented so I highly recommend to read the &lt;a href="https://wiki.archlinux.org/index.php/Installation_guide">Arch installation guide&lt;/a>.
This guide installs the Gnome desktop environment, but one can easily swap Gnome for i3 or another desktop environment, or leave it all together.
This is the procedure I used for installing Arch on a Thinkpad t460s, t490s and a Dell Precision 5550.&lt;/p>
&lt;p>This article has been updated on 2025-08-03.&lt;/p>
&lt;h2 id="wifi">Wifi&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="ln">1&lt;/span>&lt;span class="cl">iwctl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">2&lt;/span>&lt;span class="cl">&lt;span class="c1"># inside iwctl:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">3&lt;/span>&lt;span class="cl">device list &lt;span class="c1"># ge.g., wlan0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">4&lt;/span>&lt;span class="cl">station wlan0 scan
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">5&lt;/span>&lt;span class="cl">station wlan0 get-networks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">6&lt;/span>&lt;span class="cl">station wlan0 connect &lt;span class="s2">&amp;#34;your-SSID&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="partitioning">Partitioning&lt;/h2>
&lt;p>Checkout the current partition scheme and the name of the harddrive(s)&lt;/p></description></item><item><title>Install the Nginx ingress controller on K3s - or Kind - and deploy a web app</title><link>https://www.moonstreet.nl/post/k3s-with-ingress/</link><pubDate>Sat, 26 Dec 2020 16:33:46 +0100</pubDate><guid>https://www.moonstreet.nl/post/k3s-with-ingress/</guid><description>
&lt;p>Here is how to quickly install Kubernetes with ingress on your laptop.
I use this to test and create operators with the &lt;a href="https://operatorframework.io/">Operator Framework&lt;/a>. Still learning though.&lt;/p>
&lt;p>I was first using &lt;a href="https://k3s.io/">K3s&lt;/a> but then I discovered &lt;a href="https://kind.sigs.k8s.io/">Kind&lt;/a> which seems to be even faster, deployment wise. Also it leaves a smaller footprint because it runs in a Docker container. (Didn't manage to run it with podman yet). So I quickly added a paragraph about Kind if you scroll down this post.&lt;/p></description></item><item><title>K3s on a Centos vm</title><link>https://www.moonstreet.nl/post/k3s-libvirt/</link><pubDate>Sun, 27 Sep 2020 09:17:02 +0200</pubDate><guid>https://www.moonstreet.nl/post/k3s-libvirt/</guid><description>
&lt;p>This post is about installing lightweight Kubernetes (K3s) on our new vm.&lt;/p>
&lt;h2 id="k3s">K3s&lt;/h2>
&lt;p>The previous post was all about being able to install Kubernetes quickly. For that I will use &lt;a href="https://k3s.io/">k3s&lt;/a> from Rancher because it is fast.
Let's go!&lt;/p>
&lt;h2 id="prepare">Prepare&lt;/h2>
&lt;p>We do this for testing so we can safely disable the firewall and SELinux on our CentOS vm.
This is because SELinux is still experimental in K3s.
We also need to enable ssh password authentication so we can issue scp commands from our host machine.
For this we just add the following lines to the extra script part of our Vagrantfile:&lt;/p></description></item><item><title>Vagrant with the libvirt plugin</title><link>https://www.moonstreet.nl/post/libvirt/</link><pubDate>Sun, 20 Sep 2020 10:37:24 +0200</pubDate><guid>https://www.moonstreet.nl/post/libvirt/</guid><description>
&lt;p>Here is a post about how to create virtual machines with Vagrant and the libvirt plugin.&lt;/p>
&lt;h2 id="why-use-libvirt-as-a-vagrant-provider">Why use libvirt as a vagrant provider&lt;/h2>
&lt;p>Because when on a modern Linux distro running Gnome, chances are it's already there!&lt;/p>
&lt;p>I use Vagrant extensively to run quick, short lived virtual machines to test and try out things. I always used and use Virtualbox as a virtual machine provider for Vagrant.
Maybe I am late to the party but I recently discovered &lt;a href="https://help.gnome.org/users/gnome-boxes/stable/supported-protocols.html.en">Gnome Boxes&lt;/a> and I was wondering about the underlying architecture. Then I went on vacation and finally took the time to investigate.&lt;/p></description></item></channel></rss>